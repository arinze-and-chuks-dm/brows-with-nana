---
import email from '@assets/icons/email.svg'
import facebook from '@assets/icons/facebook.svg'
import instagram from '@assets/icons/instagram.svg'
import locationIcon from '@assets/icons/location-pin-dark.svg'
import config from '@config/config.json'
import menu from '@config/menu.json'
import { markdownify } from '@lib/utils/textConverter'
import Logo from './Logo.astro'
const {
  params,
  contact_info,
  social
} = config;
const GOOGLE_MAPS_API_KEY = import.meta.env.GOOGLE_MAPS_API_KEY;

const { main } = menu;
const data =  [
    {text: contact_info.address, icon: locationIcon, alt: 'location'},
    {text: contact_info.email, icon: email, alt: 'email'},
]
const { title } = Astro.props
const is404Page = title === '404'
---
<footer class:list={['section', {'bg-primary text-dark': is404Page }]} aria-labelledby="footer-heading">
  <span id="footer-heading" class="sr-only">Footer</span>
  <div class="mx-auto  pb-8 pt-16">
    <div class="gap-y-10 gap-x-5 grid grid-cols-2 xl:grid-cols-12 xl:gap-8">
      <div class="col-span-2 md:col-span-2">
        <Logo />
      </div>
      <div class="col-span-1 space-y-5">
        <h3 class="text-sm font-semibold leading-6">Links</h3>
        <ul role="list" class="mt-6 space-y-4">
          {
            Object.entries(main).map(([name, url]) => (
              <li>
                <a href={url} aria-label={name} class="social-icons">
                  {name}
                </a>
              </li>
            ))
          }
        </ul>
      </div>
      <div class="col-span-3 space-y-5">
        <h3 class="text-sm font-semibold leading-6">Contact Us</h3>
        <div>
          <ul class="space-y-5">
            {data.map(item => (
                <li class="flex space-x-2">
                    <img class="self-start" src={item.icon.src} alt={item.alt} />
                    <span set:html={markdownify(item.text)} />
                </li>

            ))}
        </ul>
        </div>
      </div>

      <div class="col-span-2 space-y-5">
        <h3 class="text-sm font-semibold leading-6">Follow Us</h3>
      <div class="grid grid-cols-3 gap-y-10">
        <a href={social.facebook} aria-label='facebook' target="_blank" rel="nofollow" class="social-icons">
          <img src={facebook.src} alt="facebook" />
        </a>
        <a href={social.instagram} aria-label="instagram" target="_blank" rel="nofollow" class="social-icons">
          <img src={instagram.src} alt="instagram" />
        </a>
      </div>
      </div>
      <div class="col-span-4 space-y-5">
        <iframe
          class="w-full h-96"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          src={`https://www.google.com/maps/embed/v1/place?q=Hoshi+Studio,+Farm+to+Market+Road+423+%232200,+Frisco,+TX&key=${GOOGLE_MAPS_API_KEY}
            `}>
          </iframe>
      </div>

    </div>
    <div
      class="mt-16 text-center border-t border-dark pt-8 sm:mt-20 lg:mt-24"
    >
      <p class="text-xs leading-5" set:html={markdownify(params.copyright)} />
    </div>
  </div>
</footer>
