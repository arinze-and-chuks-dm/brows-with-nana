---
import Header from '@components/Header.astro'
import Base from '@layouts/Base.astro'
import Default from '@layouts/Default.astro'
import { getSinglePage } from '@lib/contentParser.astro'
import type { CollectionEntry } from 'astro:content'

export async function getStaticPaths() {
  const pages = await getSinglePage('pages')

  const paths = pages.map((page) => ({
    params: {
      regular: page.slug
    },
    props: { page}
  }))
  return paths
}

type Props  ={
  page: CollectionEntry<"pages">
}
const { page } = Astro.props
const { title, meta_title, description, image } = page.data
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image?.src}
>
    <!-- <Header pathName={Astro.url.pathname} client:load /> -->
    <Header client:load />
  <Default data={page} />
</Base>
